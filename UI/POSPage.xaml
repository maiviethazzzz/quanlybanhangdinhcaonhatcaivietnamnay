<Page x:Class="QuanLyBanHang.UI.POSPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Bán hàng">
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="380"/>
        </Grid.ColumnDefinitions>
        
        <!-- Danh sách sản phẩm -->
        <GroupBox Grid.Column="0" Header="Danh sách sản phẩm" Margin="0,0,10,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBox x:Name="txtSearch" Width="200" Height="30" Margin="0,0,10,0"/>
                    <Button Content="Tìm kiếm" Height="30" Padding="15,0" Click="btnSearch_Click"/>
                </StackPanel>
                
                <DataGrid x:Name="dgProducts" Grid.Row="1" AutoGenerateColumns="False" 
                          IsReadOnly="True" SelectionMode="Single"
                          MouseDoubleClick="dgProducts_MouseDoubleClick">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Mã" Binding="{Binding ProductId}" Width="50"/>
                        <DataGridTextColumn Header="Tên sản phẩm" Binding="{Binding ProductName}" Width="*"/>
                        <DataGridTextColumn Header="Giá bán" Binding="{Binding SellingPrice, StringFormat=N0}"/>
                        <DataGridTextColumn Header="Tồn kho" Binding="{Binding Quantity}"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </GroupBox>
        
        <!-- Giỏ hàng -->
        <GroupBox Grid.Column="1" Header="Giỏ hàng">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <DataGrid x:Name="dgCart" Grid.Row="0" AutoGenerateColumns="False" 
                          IsReadOnly="True" SelectionMode="Single">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Sản phẩm" Binding="{Binding ProductName}" Width="*"/>
                        <DataGridTextColumn Header="SL" Binding="{Binding Quantity}" Width="40"/>
                        <DataGridTextColumn Header="Thành tiền" Binding="{Binding LineTotal, StringFormat=N0}" Width="80"/>
                        <DataGridTemplateColumn Width="30">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="X" Click="btnRemove_Click"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
                
                <StackPanel Grid.Row="1" Margin="0,10">
                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="Tên khách hàng:" Width="110"/>
                        <TextBox x:Name="txtCustomerName" Width="220"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="Tạm tính:" Width="110"/>
                        <TextBlock x:Name="lblSubTotal" Text="0" Width="220"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="Giảm giá (%):" Width="110"/>
                        <TextBox x:Name="txtDiscount" Text="0" Width="100" TextChanged="txtDiscount_TextChanged"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="VAT (10%):" Width="110"/>
                        <TextBlock x:Name="lblVAT" Text="0" Width="220"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,10,0,5">
                        <TextBlock Text="TỔNG CỘNG:" FontWeight="Bold" Width="110"/>
                        <TextBlock x:Name="lblTotal" Text="0" FontWeight="Bold" FontSize="18" Foreground="Red"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="Tiền khách đưa:" Width="110"/>
                        <TextBox x:Name="txtReceived" Width="150" TextChanged="txtReceived_TextChanged"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="Tiền thừa:" Width="110"/>
                        <TextBlock x:Name="lblChange" Text="0" FontWeight="Bold" Foreground="Green"/>
                    </StackPanel>
                </StackPanel>
                
                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Content="Thanh toán" Width="100" Height="35" Margin="5" 
                            Background="LightGreen" Click="btnCheckout_Click"/>
                    <Button Content="Xóa giỏ" Width="80" Height="35" Margin="5" Click="btnClear_Click"/>
                </StackPanel>
            </Grid>
        </GroupBox>
    </Grid>
</Page>
